function M(e,s){const n=typeof e;if(n!==typeof s)return!1;if(Array.isArray(e)){if(!Array.isArray(s))return!1;const l=e.length;if(l!==s.length)return!1;for(let u=0;u<l;u++)if(!M(e[u],s[u]))return!1;return!0}if(n==="object"){if(!e||!s)return e===s;const l=Object.keys(e),u=Object.keys(s);if(l.length!==u.length)return!1;for(const r of l)if(!M(e[r],s[r]))return!1;return!0}return e===s}function I(e){return encodeURI(be(e))}function be(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const tr={additionalItems:!0,unevaluatedItems:!0,items:!0,contains:!0,additionalProperties:!0,unevaluatedProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},xe={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},Oe={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},ze={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let Pe=typeof self<"u"&&self.location?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function E(e,s=Object.create(null),n=Pe,l=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const a=e.$id||e.id;if(a){const r=new URL(a,n.href);r.hash.length>1?s[r.href]=e:(r.hash="",l===""?n=r:E(e,s,n))}}else if(e!==!0&&e!==!1)return s;const u=n.href+(l?"#"+l:"");if(s[u]!==void 0)throw new Error(`Duplicate schema URI "${u}".`);if(s[u]=e,e===!0||e===!1)return s;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:u}),e.$ref&&e.__absolute_ref__===void 0){const a=new URL(e.$ref,n.href);a.hash=a.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:a.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const a=new URL(e.$recursiveRef,n.href);a.hash=a.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:a.href})}if(e.$anchor){const a=new URL("#"+e.$anchor,n.href);s[a.href]=e}for(let a in e){if(ze[a])continue;const r=`${l}/${I(a)}`,o=e[a];if(Array.isArray(o)){if(xe[a]){const h=o.length;for(let O=0;O<h;O++)E(o[O],s,n,`${r}/${O}`)}}else if(Oe[a])for(let h in o)E(o[h],s,n,`${r}/${I(h)}`);else E(o,s,n,r)}return s}const Ee=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ve=[0,31,28,31,30,31,30,31,31,30,31,30,31],Re=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Se=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Te=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,je=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Me=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,Ae=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Ne=/^(?:\/(?:[^~/]|~0|~1)*)*$/,ce=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,qe=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Fe=/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Ue=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,De=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Ke=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,Ve=e=>{if(e[0]==='"')return!1;const[s,n,...l]=e.split("@");return!s||!n||l.length!==0||s.length>64||n.length>253||s[0]==="."||s.endsWith(".")||s.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(s)?!1:n.split(".").every(u=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(u))},Je=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,He=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Ye=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function _(e){return e.test.bind(e)}const Ge={date:we,time:ke.bind(void 0,!1),"date-time":We,duration:Ye,uri:Ce,"uri-reference":_(Te),"uri-template":_(je),url:_(Me),email:Ve,hostname:_(Se),ipv4:_(Je),ipv6:_(He),regex:er,uuid:_(Ae),"json-pointer":_(Ne),"json-pointer-uri-fragment":_(ce),"relative-json-pointer":_(qe)},he={...Ge,date:_(Fe),time:_(Ue),"date-time":_(De),"uri-reference":_(Ke)};function Ze(e){return e%4===0&&(e%100!==0||e%400===0)}function we(e){const s=e.match(Ee);if(!s)return!1;const n=+s[1],l=+s[2],u=+s[3];return l>=1&&l<=12&&u>=1&&u<=(l==2&&Ze(n)?29:ve[l])}function ke(e,s){const n=s.match(Re);if(!n)return!1;const l=+n[1],u=+n[2],a=+n[3],r=!!n[5];return(l<=23&&u<=59&&a<=59||l==23&&u==59&&a==60)&&(!e||r)}const Be=/t|\s/i;function We(e){const s=e.split(Be);return s.length==2&&we(s[0])&&ke(!0,s[1])}const Xe=/\/|:/,Qe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Ce(e){return Xe.test(e)&&Qe.test(e)}const Le=/[^\\]\\Z/;function er(e){if(Le.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}function rr(e){let s=0,n=e.length,l=0,u;for(;l<n;)s++,u=e.charCodeAt(l++),u>=55296&&u<=56319&&l<n&&(u=e.charCodeAt(l),(u&64512)==56320&&l++);return s}function w(e,s,n="2019-09",l=E(s),u=!0,a=null,r="#",o="#",h=Object.create(null)){if(s===!0)return{valid:!0,errors:[]};if(s===!1)return{valid:!1,errors:[{instanceLocation:r,keyword:"false",keywordLocation:r,error:"False boolean schema."}]};const O=typeof e;let k;switch(O){case"boolean":case"number":case"string":k=O;break;case"object":e===null?k="null":Array.isArray(e)?k="array":k="object";break;default:throw new Error(`Instances of "${O}" type are not supported.`)}const{$ref:A,$recursiveRef:ge,$recursiveAnchor:N,type:b,const:v,enum:R,required:re,not:te,anyOf:J,allOf:H,oneOf:de,if:fe,then:ne,else:se,format:c,properties:Y,patternProperties:G,additionalProperties:oe,unevaluatedProperties:ue,minProperties:Z,maxProperties:B,propertyNames:ie,dependentRequired:W,dependentSchemas:X,dependencies:Q,prefixItems:C,items:S,additionalItems:le,unevaluatedItems:ae,contains:$e,minContains:x,maxContains:q,minItems:L,maxItems:ee,uniqueItems:_e,minimum:z,maximum:P,exclusiveMinimum:T,exclusiveMaximum:j,multipleOf:F,minLength:U,maxLength:D,pattern:me,__absolute_ref__:K,__absolute_recursive_ref__:Ie}=s,d=[];if(N===!0&&a===null&&(a=s),ge==="#"){const $=a===null?l[Ie]:a,i=`${o}/$recursiveRef`,p=w(e,a===null?s:a,n,l,u,$,r,i,h);p.valid||d.push({instanceLocation:r,keyword:"$recursiveRef",keywordLocation:i,error:"A subschema had errors."},...p.errors)}if(A!==void 0){const i=l[K||A];if(i===void 0){let t=`Unresolved $ref "${A}".`;throw K&&K!==A&&(t+=`  Absolute URI "${K}".`),t+=`
Known schemas:
- ${Object.keys(l).join(`
- `)}`,new Error(t)}const p=`${o}/$ref`,f=w(e,i,n,l,u,a,r,p,h);if(f.valid||d.push({instanceLocation:r,keyword:"$ref",keywordLocation:p,error:"A subschema had errors."},...f.errors),n==="4"||n==="7")return{valid:d.length===0,errors:d}}if(Array.isArray(b)){let $=b.length,i=!1;for(let p=0;p<$;p++)if(k===b[p]||b[p]==="integer"&&k==="number"&&e%1===0&&e===e){i=!0;break}i||d.push({instanceLocation:r,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${k}" is invalid. Expected "${b.join('", "')}".`})}else b==="integer"?(k!=="number"||e%1||e!==e)&&d.push({instanceLocation:r,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${k}" is invalid. Expected "${b}".`}):b!==void 0&&k!==b&&d.push({instanceLocation:r,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${k}" is invalid. Expected "${b}".`});if(v!==void 0&&(k==="object"||k==="array"?M(e,v)||d.push({instanceLocation:r,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(v)}.`}):e!==v&&d.push({instanceLocation:r,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(v)}.`})),R!==void 0&&(k==="object"||k==="array"?R.some($=>M(e,$))||d.push({instanceLocation:r,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(R)}.`}):R.some($=>e===$)||d.push({instanceLocation:r,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(R)}.`})),te!==void 0){const $=`${o}/not`;w(e,te,n,l,u,a,r,$).valid&&d.push({instanceLocation:r,keyword:"not",keywordLocation:$,error:'Instance matched "not" schema.'})}let V=[];if(J!==void 0){const $=`${o}/anyOf`,i=d.length;let p=!1;for(let f=0;f<J.length;f++){const t=J[f],y=Object.create(h),m=w(e,t,n,l,u,N===!0?a:null,r,`${$}/${f}`,y);d.push(...m.errors),p=p||m.valid,m.valid&&V.push(y)}p?d.length=i:d.splice(i,0,{instanceLocation:r,keyword:"anyOf",keywordLocation:$,error:"Instance does not match any subschemas."})}if(H!==void 0){const $=`${o}/allOf`,i=d.length;let p=!0;for(let f=0;f<H.length;f++){const t=H[f],y=Object.create(h),m=w(e,t,n,l,u,N===!0?a:null,r,`${$}/${f}`,y);d.push(...m.errors),p=p&&m.valid,m.valid&&V.push(y)}p?d.length=i:d.splice(i,0,{instanceLocation:r,keyword:"allOf",keywordLocation:$,error:"Instance does not match every subschema."})}if(de!==void 0){const $=`${o}/oneOf`,i=d.length,p=de.filter((f,t)=>{const y=Object.create(h),m=w(e,f,n,l,u,N===!0?a:null,r,`${$}/${t}`,y);return d.push(...m.errors),m.valid&&V.push(y),m.valid}).length;p===1?d.length=i:d.splice(i,0,{instanceLocation:r,keyword:"oneOf",keywordLocation:$,error:`Instance does not match exactly one subschema (${p} matches).`})}if((k==="object"||k==="array")&&Object.assign(h,...V),fe!==void 0){const $=`${o}/if`;if(w(e,fe,n,l,u,a,r,$,h).valid){if(ne!==void 0){const p=w(e,ne,n,l,u,a,r,`${o}/then`,h);p.valid||d.push({instanceLocation:r,keyword:"if",keywordLocation:$,error:'Instance does not match "then" schema.'},...p.errors)}}else if(se!==void 0){const p=w(e,se,n,l,u,a,r,`${o}/else`,h);p.valid||d.push({instanceLocation:r,keyword:"if",keywordLocation:$,error:'Instance does not match "else" schema.'},...p.errors)}}if(k==="object"){if(re!==void 0)for(const f of re)f in e||d.push({instanceLocation:r,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${f}".`});const $=Object.keys(e);if(Z!==void 0&&$.length<Z&&d.push({instanceLocation:r,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${Z} properties.`}),B!==void 0&&$.length>B&&d.push({instanceLocation:r,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${B} properties.`}),ie!==void 0){const f=`${o}/propertyNames`;for(const t in e){const y=`${r}/${I(t)}`,m=w(t,ie,n,l,u,a,y,f);m.valid||d.push({instanceLocation:r,keyword:"propertyNames",keywordLocation:f,error:`Property name "${t}" does not match schema.`},...m.errors)}}if(W!==void 0){const f=`${o}/dependantRequired`;for(const t in W)if(t in e){const y=W[t];for(const m of y)m in e||d.push({instanceLocation:r,keyword:"dependentRequired",keywordLocation:f,error:`Instance has "${t}" but does not have "${m}".`})}}if(X!==void 0)for(const f in X){const t=`${o}/dependentSchemas`;if(f in e){const y=w(e,X[f],n,l,u,a,r,`${t}/${I(f)}`,h);y.valid||d.push({instanceLocation:r,keyword:"dependentSchemas",keywordLocation:t,error:`Instance has "${f}" but does not match dependant schema.`},...y.errors)}}if(Q!==void 0){const f=`${o}/dependencies`;for(const t in Q)if(t in e){const y=Q[t];if(Array.isArray(y))for(const m of y)m in e||d.push({instanceLocation:r,keyword:"dependencies",keywordLocation:f,error:`Instance has "${t}" but does not have "${m}".`});else{const m=w(e,y,n,l,u,a,r,`${f}/${I(t)}`);m.valid||d.push({instanceLocation:r,keyword:"dependencies",keywordLocation:f,error:`Instance has "${t}" but does not match dependant schema.`},...m.errors)}}}const i=Object.create(null);let p=!1;if(Y!==void 0){const f=`${o}/properties`;for(const t in Y){if(!(t in e))continue;const y=`${r}/${I(t)}`,m=w(e[t],Y[t],n,l,u,a,y,`${f}/${I(t)}`);if(m.valid)h[t]=i[t]=!0;else if(p=u,d.push({instanceLocation:r,keyword:"properties",keywordLocation:f,error:`Property "${t}" does not match schema.`},...m.errors),p)break}}if(!p&&G!==void 0){const f=`${o}/patternProperties`;for(const t in G){const y=new RegExp(t),m=G[t];for(const g in e){if(!y.test(g))continue;const ye=`${r}/${I(g)}`,pe=w(e[g],m,n,l,u,a,ye,`${f}/${I(t)}`);pe.valid?h[g]=i[g]=!0:(p=u,d.push({instanceLocation:r,keyword:"patternProperties",keywordLocation:f,error:`Property "${g}" matches pattern "${t}" but does not match associated schema.`},...pe.errors))}}}if(!p&&oe!==void 0){const f=`${o}/additionalProperties`;for(const t in e){if(i[t])continue;const y=`${r}/${I(t)}`,m=w(e[t],oe,n,l,u,a,y,f);m.valid?h[t]=!0:(p=u,d.push({instanceLocation:r,keyword:"additionalProperties",keywordLocation:f,error:`Property "${t}" does not match additional properties schema.`},...m.errors))}}else if(!p&&ue!==void 0){const f=`${o}/unevaluatedProperties`;for(const t in e)if(!h[t]){const y=`${r}/${I(t)}`,m=w(e[t],ue,n,l,u,a,y,f);m.valid?h[t]=!0:d.push({instanceLocation:r,keyword:"unevaluatedProperties",keywordLocation:f,error:`Property "${t}" does not match unevaluated properties schema.`},...m.errors)}}}else if(k==="array"){ee!==void 0&&e.length>ee&&d.push({instanceLocation:r,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${e.length} > ${ee}).`}),L!==void 0&&e.length<L&&d.push({instanceLocation:r,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${e.length} < ${L}).`});const $=e.length;let i=0,p=!1;if(C!==void 0){const f=`${o}/prefixItems`,t=Math.min(C.length,$);for(;i<t;i++){const y=w(e[i],C[i],n,l,u,a,`${r}/${i}`,`${f}/${i}`);if(h[i]=!0,!y.valid&&(p=u,d.push({instanceLocation:r,keyword:"prefixItems",keywordLocation:f,error:"Items did not match schema."},...y.errors),p))break}}if(S!==void 0){const f=`${o}/items`;if(Array.isArray(S)){const t=Math.min(S.length,$);for(;i<t;i++){const y=w(e[i],S[i],n,l,u,a,`${r}/${i}`,`${f}/${i}`);if(h[i]=!0,!y.valid&&(p=u,d.push({instanceLocation:r,keyword:"items",keywordLocation:f,error:"Items did not match schema."},...y.errors),p))break}}else for(;i<$;i++){const t=w(e[i],S,n,l,u,a,`${r}/${i}`,f);if(h[i]=!0,!t.valid&&(p=u,d.push({instanceLocation:r,keyword:"items",keywordLocation:f,error:"Items did not match schema."},...t.errors),p))break}if(!p&&le!==void 0){const t=`${o}/additionalItems`;for(;i<$;i++){const y=w(e[i],le,n,l,u,a,`${r}/${i}`,t);h[i]=!0,y.valid||(p=u,d.push({instanceLocation:r,keyword:"additionalItems",keywordLocation:t,error:"Items did not match additional items schema."},...y.errors))}}}if($e!==void 0)if($===0&&x===void 0)d.push({instanceLocation:r,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(x!==void 0&&$<x)d.push({instanceLocation:r,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${$}) than minContains (${x}).`});else{const f=`${o}/contains`,t=d.length;let y=0;for(let m=0;m<$;m++){const g=w(e[m],$e,n,l,u,a,`${r}/${m}`,f);g.valid?(h[m]=!0,y++):d.push(...g.errors)}y>=(x||0)&&(d.length=t),x===void 0&&q===void 0&&y===0?d.splice(t,0,{instanceLocation:r,keyword:"contains",keywordLocation:f,error:"Array does not contain item matching schema."}):x!==void 0&&y<x?d.push({instanceLocation:r,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${x} items matching schema. Only ${y} items were found.`}):q!==void 0&&y>q&&d.push({instanceLocation:r,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${q} items matching schema. ${y} items were found.`})}if(!p&&ae!==void 0){const f=`${o}/unevaluatedItems`;for(i;i<$;i++){if(h[i])continue;const t=w(e[i],ae,n,l,u,a,`${r}/${i}`,f);h[i]=!0,t.valid||d.push({instanceLocation:r,keyword:"unevaluatedItems",keywordLocation:f,error:"Items did not match unevaluated items schema."},...t.errors)}}if(_e)for(let f=0;f<$;f++){const t=e[f],y=typeof t=="object"&&t!==null;for(let m=0;m<$;m++){if(f===m)continue;const g=e[m];(t===g||y&&(typeof g=="object"&&g!==null)&&M(t,g))&&(d.push({instanceLocation:r,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${f} and ${m}.`}),f=Number.MAX_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER)}}}else if(k==="number"){if(n==="4"?(z!==void 0&&(T===!0&&e<=z||e<z)&&d.push({instanceLocation:r,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${T?"or equal to ":""} ${z}.`}),P!==void 0&&(j===!0&&e>=P||e>P)&&d.push({instanceLocation:r,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${j?"or equal to ":""} ${P}.`})):(z!==void 0&&e<z&&d.push({instanceLocation:r,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${z}.`}),P!==void 0&&e>P&&d.push({instanceLocation:r,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${P}.`}),T!==void 0&&e<=T&&d.push({instanceLocation:r,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${e} is less than ${T}.`}),j!==void 0&&e>=j&&d.push({instanceLocation:r,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${e} is greater than or equal to ${j}.`})),F!==void 0){const $=e%F;Math.abs(0-$)>=11920929e-14&&Math.abs(F-$)>=11920929e-14&&d.push({instanceLocation:r,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${e} is not a multiple of ${F}.`})}}else if(k==="string"){const $=U===void 0&&D===void 0?0:rr(e);U!==void 0&&$<U&&d.push({instanceLocation:r,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${$} < ${U}).`}),D!==void 0&&$>D&&d.push({instanceLocation:r,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${$} > ${D}).`}),me!==void 0&&!new RegExp(me).test(e)&&d.push({instanceLocation:r,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),c!==void 0&&he[c]&&!he[c](e)&&d.push({instanceLocation:r,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${c}".`})}return{valid:d.length===0,errors:d}}class dr{constructor(s,n="2019-09",l=!0){this.schema=s,this.draft=n,this.shortCircuit=l,this.lookup=E(s)}validate(s){return w(s,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(s,n){n&&(s={...s,$id:n}),E(s,this.lookup)}}export{dr as Validator,M as deepCompareStrict,E as dereference,I as encodePointer,be as escapePointer,he as fastFormat,Ge as fullFormat,ze as ignoredKeyword,Pe as initialBaseURI,xe as schemaArrayKeyword,tr as schemaKeyword,Oe as schemaMapKeyword,rr as ucs2length,w as validate};
